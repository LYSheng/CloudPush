(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/register/register"],{"7f4f":function(e,o,n){"use strict";n.r(o);var t=n("bd43"),s=n("f284");for(var i in s)"default"!==i&&function(e){n.d(o,e,function(){return s[e]})}(i);n("af74");var a=n("2877"),c=Object(a["a"])(s["default"],t["a"],t["b"],!1,null,"10d5f2ca",null);o["default"]=c.exports},af74:function(e,o,n){"use strict";var t=n("f5ba"),s=n.n(t);s.a},bd43:function(e,o,n){"use strict";var t=function(){var e=this,o=e.$createElement;e._self._c},s=[];n.d(o,"a",function(){return t}),n.d(o,"b",function(){return s})},f10e:function(e,o,n){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t=i(n("895e")),s=i(n("916e"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/mpvue-citypicker/src/mpvueCityPicker")]).then(n.bind(null,"3e01"))},c={data:function(){return{pickerValueDefault:[0,0,0],username:"",phone:"",yanPhone:"",adders:"",idCard:"",imageSrcOne:"",imageSrcOneZs:"",imageSrcTwo:"",imageSrcTwoZs:"",address:"请选择地址",countdown:"获取验证码",timestatus:!1,disabled:!1,code:"",clear:"",phoneMask:!1,session:"",county:"",city:"",province:""}},components:{mpvueCityPicker:a},onLoad:function(){this.session=e.getStorageSync("session")},methods:{previewImage:function(o){var n=[];n.push(o),e.previewImage({urls:n,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log(e.errMsg)}}})},getPhoneNumber:function(o){console.log(o);var n=this;if("getPhoneNumber:fail user deny"==o.detail.errMsg)console.log("拒绝了"),e.showToast({icon:"none",title:"请授权获取手机号"});else{var t=o.detail.encryptedData,s=o.detail.iv;n.getPhone(t,s)}},getPhone:function(o,n){var i=this,a={encrypted:o,iv:n,session:i.session};t.default.LoginPost(s.default.queryWxMiniMobile,a,function(o){console.log(o),i.phone=o.mobile,e.setStorageSync("phone",o.mobile)})},chooseImageOne:function(){var o=this;e.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera","album"],success:function(n){console.log(n);var t=n.tempFilePaths[0];console.log(t),e.uploadFile({url:"https://api30.chuanhuoapp.com/business-user/v1/yt/uploadImage",filePath:t,fileType:"image",formData:{file:t},name:"file",header:{"Content-Type":"multipart/form-data"},success:function(n){console.log(n),console.log(JSON.parse(n.data));var s=JSON.parse(n.data);e.showToast({title:"上传成功",icon:"success",duration:1e3}),o.imageSrcOne=s.data,o.imageSrcOneZs=t},fail:function(o){console.log("uploadImage fail",o),e.showModal({content:o.errMsg,showCancel:!1})}})},fail:function(e){console.log("chooseImage fail",e)}})},chooseImageTwo:function(){var o=this;e.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera","album"],success:function(n){console.log("chooseImage success, temp path is",n.tempFilePaths[0]);var t=n.tempFilePaths[0];e.uploadFile({url:"https://api30.chuanhuoapp.com/business-user/v1/yt/uploadImage",filePath:t,fileType:"image",name:"file",header:{"Content-Type":"multipart/form-data"},success:function(n){var s=JSON.parse(n.data);e.showToast({title:"上传成功",icon:"success",duration:1e3}),o.imageSrcTwo=s.data,o.imageSrcTwoZs=t},fail:function(o){console.log("uploadImage fail",o),e.showModal({content:o.errMsg,showCancel:!1})}})},fail:function(e){console.log("chooseImage fail",e)}})},imageSrcOneNone:function(){this.imageSrcOne=""},imageSrcTwoNone:function(){this.imageSrcTwo=""},showCityPicker:function(){this.$refs.mpvueCityPicker.show()},onChange:function(e){console.log(e)},onCancel:function(e){console.log(e),this.$refs.mpvueCityPicker.hide()},onConfirm:function(e){console.log(e),this.address=e.label;var o=this.address.split("-");console.log(o),this.province=o[0],this.city=o[1],this.county=o[2],this.$refs.mpvueCityPicker.hide()},phoneMaskQu:function(){this.phoneMask=!1},join:function(){var o=this;if(""!=o.imageSrcOne)if(""!=o.imageSrcTwo)if(""!=o.username)if(""!=o.phone){if(!/^1[3456789]\d{9}$/.test(this.phone))return e.showToast({icon:"none",title:"请填写正确的手机号码"}),!1;if(""!=o.adders)if("请选择地址"!==o.address)if(""!=o.idCard)if(/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(this.idCard))if(/^ +| +$/g.test(this.username))e.showToast({icon:"none",title:"姓名含有空格"});else if(/^ +| +$/g.test(this.phone))e.showToast({icon:"none",title:"手机号含有空格"});else if(/^ +| +$/g.test(this.adders))e.showToast({icon:"none",title:"详细地址含有空格"});else if(/^ +| +$/g.test(this.idCard))e.showToast({icon:"none",title:"身份证信息含有空格"});else{var n={addressCity:o.city,addressCounty:o.county,addressDetail:o.adders,addressProvince:o.province,code:o.code,idCardBackImage:o.imageSrcTwo,idCardFrontImage:o.imageSrcOne,idCardNo:o.idCard,name:o.username,phone:o.phone,session:o.session};t.default.LoginPost(s.default.register,n,function(o){console.log(o),e.setStorageSync("token",o.token),e.setStorageSync("uid",o.userId),e.setStorageSync("secret",o.secret),e.switchTab({url:"/pages/home/home"})})}else e.showToast({icon:"none",title:"请输入正确的身份证信息"});else e.showToast({icon:"none",title:"请输入身份证信息"});else e.showToast({icon:"none",title:"请选择常住地址"});else e.showToast({icon:"none",title:"请输入详细地址"})}else e.showToast({icon:"none",title:"请输入手机号"});else e.showToast({icon:"none",title:"请输入姓名"});else e.showToast({icon:"none",title:"请上传身份证反面照片"});else e.showToast({icon:"none",title:"请上传身份证正面照片"})},getCode:function(){var o=this;""!=o.yanPhone?o.getSmsCode():e.showToast({icon:"none",title:"请填写手机号码"})},phoneSubmit:function(){var o=this;if(""!=o.code){var n={code:o.code,phone:o.yanPhone};t.default.Request(s.default.checkSmsCode,"POST",n,function(n){console.log(n),e.setStorageSync("phone",o.yanPhone),o.phone=o.yanPhone,o.phoneMask=!1,o.yanPhone=""})}else e.showToast({icon:"none",title:"请输入手机验证码"})},getSmsCode:function(){var e=this,o={mobile:e.yanPhone};t.default.Request(s.default.getSmsCode,"POST",o,function(o){console.log(o),e.disabled=!0,e.countdown=60,e.timestatus=!0,e.clear=setInterval(e.countDown,1e3)})},countDown:function(){var e=this;e.countdown?--e.countdown:(e.disabled=!1,e.timestatus=!1,e.countdown="获取验证码",clearInterval(e.clear))}}};o.default=c}).call(this,n("543d")["default"])},f284:function(e,o,n){"use strict";n.r(o);var t=n("f10e"),s=n.n(t);for(var i in t)"default"!==i&&function(e){n.d(o,e,function(){return t[e]})}(i);o["default"]=s.a},f5ba:function(e,o,n){}},[["6457","common/runtime","common/vendor"]]]);